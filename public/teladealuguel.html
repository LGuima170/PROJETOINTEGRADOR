<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport"/>
<meta content="" name="description"/>
<meta content="Tooplate" name="author"/>
<link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&amp;display=swap" rel="stylesheet"/>
<title>Alugue uma quadra - EsporteAgenda</title>
<!-- Additional CSS Files -->
<link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="assets/css/font-awesome.css" rel="stylesheet" type="text/css"/>
<link href="assets/css/owl-carousel.css" rel="stylesheet" type="text/css"/>
<link href="assets/css/tooplate-artxibition.css" rel="stylesheet"/>
<!--

Tooplate 2125 ArtXibition

https://www.tooplate.com/view/2125-artxibition

-->
<style>
    .quadras-container {
        padding: 50px 0;
        background: #f8f9fa;
    }
    
    .quadra-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        margin-bottom: 30px;
        overflow: hidden;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .quadra-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
    }
    
    .quadra-image {
        height: 250px;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        position: relative;
    }
    
    .quadra-image::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(0,0,0,0.1));
    }
    
    .quadra-tipo {
        position: absolute;
        top: 15px;
        right: 15px;
        background: #ffcc00;
        color: #333;
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: bold;
        text-transform: uppercase;
    }
    
    .quadra-content {
        padding: 25px;
    }
    
    .quadra-title {
        font-size: 24px;
        font-weight: 700;
        color: #333;
        margin-bottom: 10px;
    }
    
    .quadra-location {
        color: #666;
        font-size: 14px;
        margin-bottom: 15px;
    }
    
    .quadra-info {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 20px;
    }
    
    .info-item {
        display: flex;
        align-items: center;
        gap: 8px;
        color: #555;
        font-size: 14px;
    }
    
    .info-item i {
        color: #ffcc00;
        width: 16px;
    }
    
    .quadra-price {
        font-size: 20px;
        font-weight: 700;
        color: #2bbf2b;
        margin-bottom: 20px;
    }
    
    .quadra-availability {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
    }
    
    .availability-title {
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
    }
    
    .availability-text {
        color: #666;
        font-size: 14px;
    }
    
    .reserve-btn {
        background: #ffcc00;
        color: #333;
        border: none;
        padding: 12px 30px;
        border-radius: 25px;
        font-weight: 600;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
    }
    
    .reserve-btn:hover {
        background: #ff9900;
        transform: translateY(-2px);
    }
    
    .loading {
        text-align: center;
        padding: 50px;
        color: #666;
    }
    
    .no-quadras {
        text-align: center;
        padding: 50px;
        color: #666;
    }
    
    .no-quadras i {
        font-size: 48px;
        color: #ddd;
        margin-bottom: 20px;
    }
    
    .filter-section {
        background: white;
        padding: 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-top: 20px;
    }
    
    .filter-title {
        font-size: 20px;
        font-weight: 600;
        margin-bottom: 20px;
        color: #333;
    }
    
    .filter-row {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
    }
    
    .filter-item {
        flex: 1;
        min-width: 200px;
    }
    
    .filter-item select,
    .filter-item input {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 8px;
        font-size: 14px;
    }
    
    .filter-item label {
        display: block;
        margin-bottom: 5px;
        font-weight: 500;
        color: #555;
    }
    
    .quadra-info-reserva {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
    }
    
    .quadra-info-reserva h6 {
        color: #333;
        font-weight: 600;
        margin-bottom: 15px;
    }
    
    .quadra-info-reserva p {
        margin-bottom: 8px;
        color: #555;
    }
    
    .modal-content {
        border-radius: 15px;
    }
    
    .modal-header {
        background: #ffcc00;
        color: #333;
        border-radius: 15px 15px 0 0;
    }
    
    .modal-title {
        font-weight: 600;
    }
    
    .form-group label {
        font-weight: 500;
        color: #333;
    }
    
    .btn-primary {
        background: #ffcc00;
        border-color: #ffcc00;
        color: #333;
        font-weight: 600;
    }
    
    .btn-primary:hover {
        background: #ff9900;
        border-color: #ff9900;
        color: #333;
    }
</style>
</head>
<body>
<!-- ***** Preloader Start ***** -->
<div class="js-preloader" id="js-preloader">
<div class="preloader-inner">
<span class="dot"></span>
<div class="dots">
<span></span>
<span></span>
<span></span>
</div>
</div>
</div>
<!-- ***** Preloader End ***** -->
<!-- ***** Pre HEader ***** -->
<div class="pre-header">
<div class="container">
<div class="row">
<div class="col-lg-6 col-sm-6">
<span>Onde o esporte começa!</span>
</div>
</div>
</div>
</div>
<!-- ***** Header Area Start ***** -->
<header class="header-area header-sticky">
<div class="container">
<div class="row">
<div class="col-12">
<nav class="main-nav">
<!-- ***** Logo Start ***** -->
<a class="logo" href="menuprincipal.html">Esporte<em>Agenda</em></a>
<!-- ***** Logo End ***** -->
<!-- ***** Menu Start ***** -->
<ul class="nav">
    <li><a href="menuprincipal.html">Início</a></li>
    <li><a href="teladealuguel.html">Alugue uma quadra</a></li>
    <li><a href="principaiseventos.html">Principais eventos</a></li>
    <li><a href="publiquesuaquadra.html">Publicar uma quadra</a></li>
    <li><a href="telalogin.html">Login</a></li>
</ul>
<a class="menu-trigger">
<span>Menu</span>
</a>
<!-- ***** Menu End ***** -->
</nav>
</div>
</div>
</div>
</header>
<!-- ***** Header Area End ***** -->
<!-- ***** Page Heading ***** -->
<div class="page-heading-rent-venue">
<div class="container">
<div class="row">
<div class="col-lg-12">
<h2>Encontre sua quadra ideal!</h2>
<span>Explore as melhores quadras disponíveis e reserve seu horário preferido</span>
</div>
</div>
</div>
</div>
<!-- ***** Filtros ***** -->
<div class="container">
<div class="filter-section">
<div class="filter-title">
<i class="fa fa-filter"></i> Filtros
</div>
<div class="filter-row">
<div class="filter-item">
<label for="tipo-filter">Tipo de Quadra</label>
<select id="tipo-filter">
    <option value="">Todos os tipos</option>
    <option value="gramado_sintetico">Gramado Sintético</option>
    <option value="society">Society</option>
    <option value="areia">Areia</option>
    <option value="cimento">Cimento</option>
    <option value="madeira">Madeira</option>
</select>
</div>
<div class="filter-item">
<label for="esporte-filter">Esporte</label>
<input type="text" id="esporte-filter" placeholder="Ex: Futebol, Vôlei...">
</div>
<div class="filter-item">
<label for="preco-filter">Preço máximo</label>
<input type="number" id="preco-filter" placeholder="R$ 0,00">
</div>
</div>
</div>
</div>
</div>
<!-- ***** Quadras Container ***** -->
<div class="quadras-container">
<div class="container">
<div class="row" id="quadras-grid">
<!-- Cards das quadras serão inseridos aqui via JavaScript -->
</div>
</div>
</div>

<!-- Modal de Reserva -->
<div class="modal fade" id="modalReserva" tabindex="-1" role="dialog" aria-labelledby="modalReservaLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalReservaLabel">Reservar Quadra</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="quadra-info-reserva">
                            <h6>Informações da Quadra</h6>
                            <p><strong>Nome:</strong> <span id="quadra-nome"></span></p>
                            <p><strong>Localização:</strong> <span id="quadra-localizacao"></span></p>
                            <p><strong>Tipo:</strong> <span id="quadra-tipo"></span></p>
                            <p><strong>Preço:</strong> <span id="quadra-preco"></span></p>
                            <p><strong>Funcionamento:</strong> <span id="quadra-funcionamento"></span></p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <form id="formReserva">
                            <input type="hidden" id="quadra-id" name="quadra_id">
                            <input type="hidden" id="usuario-id" name="usuario_id" value="1">
                            
                            <div class="form-group">
                                <label for="data-reserva">Data da Reserva*</label>
                                <input type="date" class="form-control" id="data-reserva" name="data_reserva" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="hora-inicio">Hora de Início*</label>
                                <input type="time" class="form-control" id="hora-inicio" name="hora_inicio" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="hora-fim">Hora de Fim*</label>
                                <input type="time" class="form-control" id="hora-fim" name="hora_fim" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="esporte">Esporte a ser praticado*</label>
                                <input type="text" class="form-control" id="esporte" name="esporte" placeholder="Ex: Futebol, Vôlei..." required>
                            </div>
                            
                            <div class="form-group">
                                <label for="observacoes">Observações</label>
                                <textarea class="form-control" id="observacoes" name="observacoes" rows="3" placeholder="Observações adicionais (opcional)"></textarea>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="confirmarReserva()">Confirmar Reserva</button>
            </div>
        </div>
    </div>
</div>

<!-- *** Footer *** -->
<footer>
<div .div-grid="" center;="" display:="" grid;="" place-items:="" {="" }="">
<div class="col-lg-12">
<div class="under-footer">
<div class="row">
<div class="col-lg-6">
<p>Brasília, Distrito Federal</p>
</div>
<div class="col-lg-6">
<p class="copyright">EsporteAgenda Inc. 2024
                            </p></div>
</div>
</div>
</div>
<div class="col-lg-12">
<div class="sub-footer">
<div class="row">
<div class="col-lg-3">
<div class="logo"><span>Esporte<em>Agenda</em></span></div>
</div>
<div class="col-lg-3">
<div class="social-links">
<ul>
<li><a href="#"><i class="fa fa-twitter"></i></a></li>
<li><a href="#"><i class="fa fa-facebook"></i></a></li>
<li><a href="#"><i class="fa fa-instagram"></i></a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

</footer>
<!-- Scripts -->
<script src="assets/js/jquery-2.1.0.min.js"></script>
<script src="assets/js/popper.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/scrollreveal.min.js"></script>
<script src="assets/js/waypoints.min.js"></script>
<script src="assets/js/jquery.counterup.min.js"></script>
<script src="assets/js/imgfix.min.js"></script>
<script src="assets/js/mixitup.js"></script>
<script src="assets/js/accordions.js"></script>
<script src="assets/js/owl-carousel.js"></script>
<script src="assets/js/custom.js"></script>
<!-- Script para carregar e exibir as quadras -->
<script>
    let todasQuadras = [];
    
    // Função para formatar o tipo de quadra
    function formatarTipo(tipo) {
        const tipos = {
            'gramado_sintetico': 'Gramado Sintético',
            'society': 'Society',
            'areia': 'Areia',
            'cimento': 'Cimento',
            'madeira': 'Madeira'
        };
        return tipos[tipo] || tipo;
    }
    
    // Função para formatar a disponibilidade
    function formatarDisponibilidade(quadra) {
        const dias = {
            'segunda': 'Segunda',
            'terca': 'Terça',
            'quarta': 'Quarta',
            'quinta': 'Quinta',
            'sexta': 'Sexta',
            'sabado': 'Sábado',
            'domingo': 'Domingo'
        };
        
        const diaInicio = dias[quadra.dia_inicio] || quadra.dia_inicio;
        const diaFim = dias[quadra.dia_fim] || quadra.dia_fim;
        
        return `${diaInicio} a ${diaFim} • ${quadra.hora_inicio} às ${quadra.hora_fim}`;
    }
    
    // Função para criar o card de uma quadra
    function criarCardQuadra(quadra) {
        const imagemUrl = quadra.imagem_url || 'assets/images/venue-01.jpg';
        
        return `
            <div class="col-lg-4 col-md-6 col-sm-12">
                <div class="quadra-card">
                    <div class="quadra-image" style="background-image: url('${imagemUrl}')">
                        <div class="quadra-tipo">${formatarTipo(quadra.tipo)}</div>
                    </div>
                    <div class="quadra-content">
                        <h3 class="quadra-title">${quadra.nome}</h3>
                        <p class="quadra-location">
                            <i class="fa fa-map-marker"></i> ${quadra.localizacao}
                        </p>
                        
                        <div class="quadra-info">
                            <div class="info-item">
                                <i class="fa fa-futbol-o"></i>
                                <span>${quadra.esportes}</span>
                            </div>
                        </div>
                        
                        <div class="quadra-price">
                            <i class="fa fa-money"></i> ${quadra.preco}
                        </div>
                        
                        <div class="quadra-availability">
                            <div class="availability-title">
                                <i class="fa fa-clock-o"></i> Horário de Funcionamento
                            </div>
                            <div class="availability-text">
                                ${formatarDisponibilidade(quadra)}
                            </div>
                        </div>
                        
                        <button class="reserve-btn" onclick="reservarQuadra(${quadra.id})">
                            Reservar Quadra
                        </button>
                    </div>
                </div>
            </div>
        `;
    }
    
    // Função para carregar as quadras
    async function carregarQuadras() {
        const container = document.getElementById('quadras-grid');
        
        // Mostrar loading
        container.innerHTML = `
            <div class="col-12">
                <div class="loading">
                    <i class="fa fa-spinner fa-spin fa-2x"></i>
                    <p>Carregando quadras...</p>
                </div>
            </div>
        `;
        
        try {
            const response = await fetch('/api/quadras');
            const data = await response.json();
            
            if (data.success) {
                todasQuadras = data.quadras;
                
                if (todasQuadras.length === 0) {
                    container.innerHTML = `
                        <div class="col-12">
                            <div class="no-quadras">
                                <i class="fa fa-frown-o"></i>
                                <h3>Nenhuma quadra encontrada</h3>
                                <p>Ainda não há quadras cadastradas no sistema.</p>
                            </div>
                        </div>
                    `;
                } else {
                    exibirQuadras(todasQuadras);
                }
            } else {
                throw new Error(data.message);
            }
        } catch (error) {
            console.error('Erro ao carregar quadras:', error);
            container.innerHTML = `
                <div class="col-12">
                    <div class="no-quadras">
                        <i class="fa fa-exclamation-triangle"></i>
                        <h3>Erro ao carregar quadras</h3>
                        <p>Não foi possível carregar as quadras. Tente novamente.</p>
                    </div>
                </div>
            `;
        }
    }
    
    // Função para exibir as quadras
    function exibirQuadras(quadras) {
        const container = document.getElementById('quadras-grid');
        container.innerHTML = quadras.map(quadra => criarCardQuadra(quadra)).join('');
    }
    
    // Função para filtrar quadras
    function filtrarQuadras() {
        const tipoFilter = document.getElementById('tipo-filter').value;
        const esporteFilter = document.getElementById('esporte-filter').value.toLowerCase();
        const precoFilter = document.getElementById('preco-filter').value;
        
        let quadrasFiltradas = todasQuadras.filter(quadra => {
            // Filtro por tipo
            if (tipoFilter && quadra.tipo !== tipoFilter) return false;
            
            // Filtro por esporte
            if (esporteFilter && !quadra.esportes.toLowerCase().includes(esporteFilter)) return false;
            
            // Filtro por preço (se implementado)
            if (precoFilter) {
                const preco = parseFloat(quadra.preco.replace(/[^\d,]/g, '').replace(',', '.'));
                if (isNaN(preco) || preco > parseFloat(precoFilter)) return false;
            }
            
            return true;
        });
        
        exibirQuadras(quadrasFiltradas);
    }
    
    // Função para reservar quadra (placeholder)
    function reservarQuadra(quadraId) {
        // Encontrar a quadra selecionada
        const quadra = todasQuadras.find(q => q.id === quadraId);
        if (!quadra) {
            alert('Quadra não encontrada!');
            return;
        }
        
        // Preencher informações da quadra no modal
        document.getElementById('quadra-id').value = quadra.id;
        document.getElementById('quadra-nome').textContent = quadra.nome;
        document.getElementById('quadra-localizacao').textContent = quadra.localizacao;
        document.getElementById('quadra-tipo').textContent = formatarTipo(quadra.tipo);
        document.getElementById('quadra-preco').textContent = quadra.preco;
        document.getElementById('quadra-funcionamento').textContent = formatarDisponibilidade(quadra);
        
        // Definir data mínima como hoje
        const hoje = new Date().toISOString().split('T')[0];
        document.getElementById('data-reserva').min = hoje;
        
        // Definir horários mínimos e máximos baseados no funcionamento da quadra
        document.getElementById('hora-inicio').min = quadra.hora_inicio;
        document.getElementById('hora-inicio').max = quadra.hora_fim;
        document.getElementById('hora-fim').min = quadra.hora_inicio;
        document.getElementById('hora-fim').max = quadra.hora_fim;
        
        // Abrir modal
        $('#modalReserva').modal('show');
    }
    
    // Função para confirmar reserva
    async function confirmarReserva() {
        const form = document.getElementById('formReserva');
        const formData = new FormData(form);
        const dados = Object.fromEntries(formData.entries());
        
        // Validações básicas
        if (!dados.data_reserva || !dados.hora_inicio || !dados.hora_fim || !dados.esporte) {
            alert('Por favor, preencha todos os campos obrigatórios!');
            return;
        }
        
        if (dados.hora_inicio >= dados.hora_fim) {
            alert('A hora de fim deve ser posterior à hora de início!');
            return;
        }
        
        try {
            const response = await fetch('/api/reservar-quadra', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(dados)
            });
            
            const result = await response.json();
            
            if (response.ok && result.success) {
                alert('Reserva realizada com sucesso!');
                $('#modalReserva').modal('hide');
                form.reset();
            } else {
                alert(result.message || 'Erro ao realizar reserva.');
            }
        } catch (error) {
            console.error('Erro ao conectar com o servidor:', error);
            alert('Erro ao conectar com o servidor. Tente novamente.');
        }
    }
    
    // Função para validar horários em tempo real
    function validarHorarios() {
        const horaInicio = document.getElementById('hora-inicio').value;
        const horaFim = document.getElementById('hora-fim').value;
        
        if (horaInicio && horaFim && horaInicio >= horaFim) {
            document.getElementById('hora-fim').setCustomValidity('A hora de fim deve ser posterior à hora de início');
        } else {
            document.getElementById('hora-fim').setCustomValidity('');
        }
    }
    
    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
        carregarQuadras();
        
        // Adicionar listeners para os filtros
        document.getElementById('tipo-filter').addEventListener('change', filtrarQuadras);
        document.getElementById('esporte-filter').addEventListener('input', filtrarQuadras);
        document.getElementById('preco-filter').addEventListener('input', filtrarQuadras);
        
        // Adicionar listeners para validação de horários
        document.getElementById('hora-inicio').addEventListener('change', validarHorarios);
        document.getElementById('hora-fim').addEventListener('change', validarHorarios);
    });
</script>
</body>
</html>

